<!DOCTYPE html>
<html lang="en">

    <head>

        <title>PANIC Engine</title>

		<meta charset="UTF-8">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="icon" type="image/png" href="./img/favicon.png"/>

        <style>

            body {

                width: 100%;
                height: 100%;

                margin: 0;

				overflow: hidden;

            }

			#PANIC {

				width: 100%;
				height: 100%;

			}

			#PANIC-Rendering {

				width: 100%;
				height: 100%;

			}

        </style>

    </head>

    <body>

        <script type="module">

			import * as PANIC from "./build/panic.js";

			async function run() {

				PANIC.Debug.enable();

				PANIC.Debug.Access.enable();

				try {

					// Add 'await' if seeking complete loading prior to rendering

					PANIC.Loaders.Entity.load( "./presets/entities/minecraft/minecraft.json" );
					PANIC.Loaders.Entity.load( "./presets/entities/minecraft/slim.json" );

					PANIC.Loaders.Entity.load( "./presets/entities/player/player.json" );

					PANIC.Loaders.Entity.load( "./presets/entities/debug/debug.json" );

					PANIC.Loaders.Entity.load( "./presets/entities/fish/fish.json" ).then( (template) => PANIC.EntityRegistry.spawnEntity(template.id) );

					PANIC.Debug.Grid.toggle();
					PANIC.Debug.Grid.scale = 16;
					PANIC.Debug.Grid.subdivisions = 16;
					PANIC.Debug.Grid.color = 0x888888;

					PANIC.Debug.Axes.toggle();

					PANIC.Debug.Compass.toggle();

					let Loop = function( time=0 ) {

					    PANIC.Updater.update();

					    PANIC.Renderer.render( PANIC.Scene, PANIC.Camera );

					    requestAnimationFrame( Loop );

					}

					requestAnimationFrame( Loop );

				}

				catch( error ) {

					PANIC.Debug.error( error );

				}

			}

			run();

        </script>

    </body>

</html>
